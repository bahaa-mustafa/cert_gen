# ๐ ุฏููู ุฅุนุฏุงุฏ OAuth Token

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุชูููุฏ OAuth Token ูุฑูุน ุงููููุงุช ุนูู Google Drive ูู ุญุณุงุจู ุงูุดุฎุตู.

---

## ๐ ููุงุฐุง ูุญุชุงุฌ Tokenุ

**ุงููุดููุฉ:**
- Service Account ูุง ููููู ุฑูุน ูููุงุช ุนูู Google Drive (ููุณ ูุฏูู storage quota)
- OAuth flow ุงูุชูููุฏู ูุง ูุนูู ุนูู Streamlit Cloud (ูุญุชุงุฌ ูุชุตูุญ)

**ุงูุญู:**
- ุชูููุฏ OAuth Token **ูุญููุงู ูุฑุฉ ูุงุญุฏุฉ ููุท**
- ุฅุถุงูุฉ Token ูู Streamlit Secrets
- ุงูุชุทุจูู ูุณุชุฎุฏู Token ููุฑูุน ูู ุญุณุงุจู ูุจุงุดุฑุฉ

---

## ๐ฏ ุงูุฎุทูุงุช (10 ุฏูุงุฆู)

### ุงูุฎุทูุฉ 1: ุงูุชุฃูุฏ ูู ุงููุชุทูุจุงุช

โ ุชุฃูุฏ ุฃู ูุฏูู:
- Python ูุซุจูุช ุนูู ุฌูุงุฒู
- ููู `oauth_credentials.json` (ุฑุงุฌุน `SETUP_INSTRUCTIONS.md` ูุฅูุดุงุฆู)
- ููุชุจุงุช Python ูุซุจูุชุฉ:
  ```bash
  pip install -r requirements.txt
  ```

---

### ุงูุฎุทูุฉ 2: ุชูููุฏ Token ูุญููุงู

1. **ุงูุชุญ Terminal/Command Prompt**

2. **ุงุฐูุจ ููุฌูุฏ ุงููุดุฑูุน:**
   ```bash
   cd path/to/cert_gen
   ```

3. **ุดุบูู ุณูุฑูุจุช ุชูููุฏ Token:**
   ```bash
   python generate_token.py
   ```

4. **ุณููุชุญ ุงููุชุตูุญ ุชููุงุฆูุงู:**
   - ุณุฌูู ุฏุฎูู ุจุญุณุงุจ Google ุงูุฐู ุชุฑูุฏ ุฑูุน ุงููููุงุช ููู
   - ุงุถุบุท **ุงูุณูุงุญ** (Allow) ูููุญ ุงูุตูุงุญูุงุช
   - ููููู ุฅุบูุงู ุงููุชุตูุญ ุจุนุฏ ุฑุคูุฉ "The authentication flow has completed"

5. **ุชุฃููุฏ ุงููุฌุงุญ:**
   - ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ: `โ ุชู ุชูููุฏ Token ุจูุฌุงุญ!`
   - ุชู ุฅูุดุงุก ููู `token.json` ูู ุงููุฌูุฏ

---

### ุงูุฎุทูุฉ 3: ูุณุฎ Token ุฅูู Streamlit Secrets

#### ุฃ) ูุณุฎ ูุญุชูู token.json

1. ุงูุชุญ ููู `token.json` ุจูุญุฑุฑ ูุตูุต
2. ุงูุณุฎ ุงููุญุชูู **ุจุงููุงูู** (ูุจุฏุฃ ุจู `{` ูููุชูู ุจู `}`)

**ูุซุงู ูููุญุชูู:**
```json
{
  "token": "ya29.a0AfB_byBxxx...",
  "refresh_token": "1//0gxxx...",
  "token_uri": "https://oauth2.googleapis.com/token",
  "client_id": "123456789-xxx.apps.googleusercontent.com",
  "client_secret": "GOCSPX-xxx",
  "scopes": ["https://www.googleapis.com/auth/drive.file"],
  "expiry": "2024-01-01T12:00:00.000000Z"
}
```

#### ุจ) ุฅุถุงูุฉ ูู Streamlit Secrets

1. ุงุฐูุจ ุฅูู [Streamlit Cloud](https://share.streamlit.io/)
2. ุงูุชุญ ุชุทุจููู
3. ุงุถุบุท **โฐ** (ุงููุงุฆูุฉ) โ **Settings** โ **Secrets**
4. **ุงุญุฐู** ุฃู ูุญุชูู ูุฏูู (ูุซู `service_account`)
5. **ุงูุตู** ุงููุญุชูู ุงูุชุงูู:

```toml
[google_drive_token]
token = '''
{
  "token": "ya29.a0AfB_byBxxx...",
  "refresh_token": "1//0gxxx...",
  "token_uri": "https://oauth2.googleapis.com/token",
  "client_id": "123456789-xxx.apps.googleusercontent.com",
  "client_secret": "GOCSPX-xxx",
  "scopes": ["https://www.googleapis.com/auth/drive.file"],
  "expiry": "2024-01-01T12:00:00.000000Z"
}
'''
```

**โ๏ธ ููุงุญุธุงุช ูููุฉ:**
- ุงุณุชุจุฏู ุงููุญุชูู ุฏุงุฎู `'''` ุจูุญุชูู `token.json` ุงูุฎุงุต ุจู
- ุงุญุชูุธ ุจู `[google_drive_token]` ู `token = '''` ููุง ูู
- ุงุณุชุฎุฏู `'''` ุซูุงุซ ุนูุงูุงุช ุชูุตูุต ูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ

6. ุงุถุบุท **Save**
7. ูู **Manage app** โ ุงุถุบุท **Reboot**

---

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงูุชุทุจูู

1. ุงูุชุญ ุชุทุจููู ุนูู Streamlit Cloud
2. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ: **โ ูุชุตู ุจุงูุฏุฑุงูู**
3. ุฌุฑูุจ ุฑูุน ููู ุชุฌุฑูุจู
4. ุงูุชุญ [Google Drive](https://drive.google.com/) ูุชุญูู ูู ูุฌูุฏ ุงููุฌูุฏ ูุงููููุงุช

---

## ๐ ุชุฌุฏูุฏ Token (ุนูุฏ ุงูุญุงุฌุฉ)

Token ุตุงูุญ ููุชุฑุฉ ุทูููุฉ ูุณููุฌุฏูุฏ ุชููุงุฆูุงู. ูููู ุฅุฐุง ุงูุชูุช ุตูุงุญูุชู:

1. ุดุบูู `python generate_token.py` ูุฑุฉ ุฃุฎุฑู
2. ุณููุทูุจ ููู ุชุฃููุฏ ุฅุนุงุฏุฉ ุงูุชูููุฏ
3. ุณุฌูู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
4. ุญุฏูุซ Secrets ูู Streamlit Cloud ุจุงููุญุชูู ุงูุฌุฏูุฏ

---

## โ ุญู ุงููุดุงูู

### ุงููุดููุฉ: "ููู oauth_credentials.json ุบูุฑ ููุฌูุฏ"
**ุงูุญู:**
1. ุฑุงุฌุน ููู `SETUP_INSTRUCTIONS.md`
2. ุฃูุดุฆ OAuth Client ID ูู Google Cloud Console
3. ูุฒูู ุงูููู ูุณููู `oauth_credentials.json`
4. ุถุนู ูู ููุณ ูุฌูุฏ `generate_token.py`

### ุงููุดููุฉ: "could not locate runnable browser"
**ุงูุญู:**
- ูุฐู ุงููุดููุฉ ุชุญุฏุซ ููุท ุนูู Server
- `generate_token.py` ูุฌุจ ุฃู ููุดุบูู **ูุญููุงู ุนูู ุฌูุงุฒู**
- ูุง ุชุญุงูู ุชุดุบููู ุนูู Streamlit Cloud

### ุงููุดููุฉ: "Invalid token" ูู Streamlit Cloud
**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุณุฎ ูุญุชูู `token.json` ุจุงููุงูู
2. ุชุฃูุฏ ูู ุงูุตูุบุฉ ุงูุตุญูุญุฉ ูู Secrets (ูุน `'''`)
3. ุฌุฑูุจ ุชูููุฏ token ุฌุฏูุฏ

### ุงููุดููุฉ: "Access blocked: This app's request is invalid"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูุนูู Google Drive API ูู Google Cloud Console
2. ุชุฃูุฏ ูู ููุน OAuth Client = "Desktop app"
3. ุฃุถู ููุณู ูู "Test user" ูู OAuth Consent Screen

---

## ๐ ุงูุฃูุงู

### โ๏ธ ูุนูููุงุช ูููุฉ:

1. **ูุง ุชุฑูุน `token.json` ุนูู GitHub ุฃุจุฏุงู**
   - ุงูููู ูุญูู ูู `.gitignore`
   - ูุญุชูู ุนูู ููุงุชูุญ ุฎุงุตุฉ ูููุตูู ูุญุณุงุจู

2. **ุงุณุชุฎุฏู Streamlit Secrets ููุท ูููุดุฑ**
   - Secrets ูุญููุฉ ููุดููุฑุฉ
   - ูุง ูููู ูุฃุญุฏ ุฑุคูุชูุง

3. **Token ูุญุฏูุฏ ุงูุตูุงุญูุงุช**
   - ููููู ููุท ุงููุตูู ูููููุงุช ุงูุชู ุฃูุดุฃูุง ุงูุชุทุจูู
   - ูุง ููููู ุญุฐู ุฃู ูุฑุงุกุฉ ูููุงุชู ุงูุฃุฎุฑู

---

## โ Checklist ุงููุฌุงุญ

- [ ] ุชู ุชุดุบูู `python generate_token.py` ูุญููุงู
- [ ] ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ ูุงูููุงููุฉ ุนูู ุงูุตูุงุญูุงุช
- [ ] ุชู ุฅูุดุงุก ููู `token.json`
- [ ] ุชู ูุณุฎ ูุญุชูู `token.json` ุจุงููุงูู
- [ ] ุชู ุฅุถุงูุฉ ุงููุญุชูู ูู Streamlit Secrets ุจุงูุตูุบุฉ ุงูุตุญูุญุฉ
- [ ] ุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู (Reboot)
- [ ] ูุธูุฑ "โ ูุชุตู ุจุงูุฏุฑุงูู" ูู sidebar
- [ ] ุชู ุงุฎุชุจุงุฑ ุฑูุน ููู ูุงูุชุฃูุฏ ูู ุธููุฑู ูู Google Drive

---

**ุฅุฐุง ุฃูููุช ุฌููุน ุงูุฎุทูุงุชุ ุงูุชุทุจูู ุงูุขู ุฌุงูุฒ ููุนูู ุนูู Streamlit Cloud! ๐**

ุฑุงุฌุน `DEPLOYMENT.md` ูููุฒูุฏ ูู ุงูุชูุงุตูู.

